---
id: firebase
slug: /firebase
title: Firebase
description: Guide for connecting Honeycomb to a Firebase project
---

Honeycomb comes with methods and configurations for easy [Firebase](https://firebase.google.com/) and [Cloud Firestore](https://firebase.google.com/docs/firestore) use. These tools make it possible reach a wider audience by deploying your task online.

:::info
Please have your PI contact [support@ccv.brown.edu](mailto:support@ccv.brown.edu) to create a Firebase project for your Honeycomb task before beginning.
:::

## Setting up the Firebase Project

First we'll configure [Firebase Hosting](https://firebase.google.com/docs/hosting) and [Cloud Firestore](https://firebase.google.com/docs/firestore) on your project.

1. Log in to Firebase with your Google account on the [Firebase console](https://console.firebase.google.com/).
2. Navigate to your project from the console
3. Register a new web app to your project ([Register your app](https://firebase.google.com/docs/web/setup#register-app))

   :::note
   We recommend giving your web app the same name as your task's repository
   :::

4. Add Firestore Database to your project ([Create a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart#create))

   :::note
   Chose `production mode` for the starting mode and the default "Cloud Firestore Location"
   :::

## Setting up the Task

The Firebase project is now fully set up! Now we'll connect your task to that project from your computer.

### Installing the Command Line Interface

The Firebase CLI can be installed with the node package manager just like the rest of Honeycomb's dependencies. Be sure to log in with same account you used when logging into the console!

```shell title="Install the Firebase CLI"
npm install -g firebase-tools
```

```shell title="Login to Firebase"
firebase login
```

_A "command not found" error usually indicates `firebase-tools` has not been installed correctly_

### Connecting Your Firebase Project

1. Change the default project name of your task in `.firebaserc`

```json title=".firebaserc" showLineNumbers
{
  "projects": {
    "default": "<your project name>"
  }
}
```

2. Copy the web app credentials from the Firebase console to the corresponding variables in `.env.firebase`

   1. Return to your project on the [Firebase console](https://console.firebase.google.com/).
   2. Navigate to your project settings

   ![Firebase Project Settings](./assets/firebase-console-settings.png)

   3. Scroll down and copy the auto-generated values from the Firebase console to the corresponding variables in the `.env.firebase` file in the `env` folder of your Honeycomb task repo:

   ![Firebase Web Credentials](./assets/firebase-web-credentials.png)

   ```shell title="env/.env.firebase"
   REACT_APP_FIREBASE="true"
   REACT_APP_apiKey=
   REACT_APP_authDomain=
   REACT_APP_projectId=
   REACT_APP_storageBucket=
   REACT_APP_messagingSenderId=
   REACT_APP_appId=
   ```

   _Additional variables may be present in the console, you don't need to copy those._

3. Deploy the default [Firestore Security Rules](https://firebase.google.com/docs/firestore/security/get-started)

```shell title="Deploy Firestore rules"
firebase deploy --only firestore:rules
```

:::note
Honeycomb uses security rules to authenticate participants and studies for each task. By default participants must be registered to each study in order to complete the task. Firestore rules are defined `firestore.rules` file in the home directory. This file can be edited if your task has different authentication requirements.
:::

### Register a Study

Your task is now set up with Firebase!

Firestore database and rules are now both deployed. For Honeycomb's default set of rules, to add an authorized participant for a study, create a collection named `registered_studies`, add a study with the study ID as the document name in that collection. For each registered study, add an array field named `registered_participants` where each element in the array will be an authorized participant for that study.

![Example Task](assets/test-task.png)

## Developing With Firebase

## Firebase Deployment

## Downloading Data
